name: "Zoi"
packages:
  - name: "rustc"
    check: "rustc --version"
  - name: "cargo"
    check: "cargo --version"

commands:
  - cmd: "build"
    run: "./build/build.sh"
  - cmd: "build-r"
    run: "./build/build-release.sh"
  - cmd: "build-all"
    run: "./build/build-all.sh"
  - cmd: "archive"
    run: "./build/archive.sh"
  - cmd: "major-prod"
    run: "bun ./version/version.js set branch prod && bun ./version/version.js bump prod major"
  - cmd: "major-dev"
    run: "bun ./version/version.js set branch dev && bun ./version/version.js bump dev major"
  - cmd: "minor-prod"
    run: "bun ./version/version.js set branch prod && bun ./version/version.js bump prod minor"
  - cmd: "minor-dev"
    run: "bun ./version/version.js set branch dev && bun ./version/version.js bump dev minor"
  - cmd: "patch-prod"
    run: "bun ./version/version.js set branch prod && bun ./version/version.js bump prod patch"
  - cmd: "patch-dev"
    run: "bun ./version/version.js set branch dev && bun ./version/version.js bump dev patch"

environments:
  - name: "Development"
    cmd: "dev"
    run: ["./build/build.sh"]
  - name: "Production"
    cmd: "prod"
    run: ["./build/build-all.sh"]
