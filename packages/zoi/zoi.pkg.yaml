# yaml-language-server: $schema=https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/raw/main/app/pkg.schema.json
name: zoi
repo: core/zillowe
versions:
  stable: https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/raw/main/app/version.json
  public: https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/raw/main/app/version.json
description: Universal Package Manager & Environment Setup Tool
website: https://zillowe.qzz.io/docs/zds/zoi
git: https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi.git
maintainer:
  name: "ZilloweZ"
  website: "https://zillowez.rf.gd"
  email: "zillowez@gmail.com"
  key: "E64EAD446DEE0781E4E294E25EE37FA1FC3B442D"
author:
  name: "Zillowe Foundation"
  website: "https://zillowe.qzz.io"
  email: "contact@zillowe.qzz.io"
license: Apache-2.0
bins: ["zoi"]
conflicts: ["zoi"]
tags:
  - cli
  - package-manager
  - rust
  - zillowe
  - zoi

installation:
  - type: com_binary
    url: "{git}/-/releases/{version}/downloads/zoi-{platform}.{platformComExt}"
    platforms: [linux, macos, windows-amd64]
    checksums: https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/releases/{version}/downloads/checksums.txt

  - type: script
    url: "{git}/-/raw/main/app/install.{platformExt}"
    platforms: [linux, macos, windows-amd64]
    checksums: https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/raw/main/app/checksums.txt

  - type: source
    url: "{git}"
    tag: "{version}"
    platforms: [linux, macos, freebsd, openbsd]
    commands:
      - ./configure --prefix={prefix}
      - make
      - sudo make install
      - make install-completions

  - type: source
    url: "{git}"
    tag: "{version}"
    platforms: [windows]
    commands:
      - ./configure --prefix={prefix}
      - make
      - make install
      - make install-completions

post_install:
  - platforms: [linux, macos]
    commands:
      - "echo Installing shell completions for {name} {version}"
      - "zoi shell bash"
      - "zoi shell zsh"
      - "zoi shell fish"
      - "zoi shell elvish"
  - platforms: [windows-amd64]
    commands:
      - "echo Installing PowerShell profile completions for {name} {version}"
      - "zoi shell powershell"

updates:
  - type: update
    message: "If you want to upgrade Zoi its recommended to run the 'upgrade' command instead"

dependencies:
  runtime:
    required:
      - "native:git"
    optional:
      - "native:less"
  build:
    - "native:rust"
    - "native:cargo"
    - "native:make"
    - "native:gcc"
    - "native:pkg-config"
    - "native:openssl-dev"
