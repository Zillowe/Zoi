# git-cliff ~ configuration file
# https://git-cliff.org/docs/configuration

[remote.gitlab]
owner = "Zillowe/Zillwen/Zusty"
repo = "Zoi"

[changelog]
body = """
{% if version %}\
    ## [{{ version | trim_start_matches(pat="v") }}] - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
    ## [unreleased]
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | striptags | trim | upper_first }}
    {% for commit in commits %}
        - {% if commit.scope %}*({{ commit.scope }})* {% endif %}\
            {% if commit.breaking %}[**breaking**] {% endif %}\
            {{ commit.message | upper_first }}\
        * {{ commit.message | split(pat="\n") | first | trim }}\
            {% if commit.remote.username %} by @{{ commit.remote.username }}{%- endif %}\
            {% if commit.remote.pr_number %} in #{{ commit.remote.pr_number }}{%- endif %}
    {% endfor %}
    {% for contributor in gitlab.contributors | filter(attribute="is_first_time", value=true) %}
        * @{{ contributor.username }} made their first contribution in #{{ contributor.pr_number }}
    {%- endfor -%}
{% endfor %}
"""
trim = true
render_always = true
postprocessors = [
    # Replace the placeholder <REPO> with a URL.
    #{ pattern = '<REPO>', replace = "https://github.com/orhun/git-cliff" },
]
output = "CHANGELOG.md"

[git]
conventional_commits = true
filter_unconventional = true
commit_parsers = [
    { message = "(?i)^Docs", skip = true },
    { message = "(?i)^CI", skip = true },
    { message = "(?i)^Release", skip = true },

    { message = "^Build", group = "ğŸ› ï¸ Build" },
    { message = "^Feat", group = "âœ¨ Features" },
    { message = "^Fix", group = "ğŸ©¹ Bug Fixes" },
    { message = "^Perf", group = "âš¡ Performance" },
    { message = "^Refactor", group = "â™»ï¸ Refactor" },
    { message = "^Style", group = "ğŸ¨ Styling" },
    { message = "^Test", group = "ğŸ§ª Testing" },
    { message = "^Revert", group = "âª Revert" },
    { message = "^Deps", group = "ğŸ›¡ï¸ Dependencies" },
    { message = "^Cleanup", group = "ğŸ§¹ Cleanup" },
    { message = "^Security", group = "ğŸ”’ Security" },
    { message = "^I18n", group = "ğŸŒ Internationalization" },
    { message = "^Migrate", group = "â¡ï¸ Migrations" },
    { message = "^SEO", group = "ğŸ” SEO" },
    { message = "^AI", group = "ğŸ§  AI" },
    { message = "^Data", group = "ğŸ“Š Data" },
    { message = "^Config", group = "ğŸ”§ Configuration" },
    { message = "^UX", group = "ğŸ¯ UX" },
    { message = "^Struct", group = "ğŸ—ï¸ Structure" },
    { message = "^Auth", group = "ğŸ” Authentication" },
    { message = "^Track", group = "ğŸ“ˆ Tracking" },
    { message = "^API", group = "ğŸ“‹ API" },
    { message = "^Git", group = "ğŸ”€ Git" },

    { message = "^chore", group = "âš™ï¸ Miscellaneous Tasks" },
    { body = ".*security", group = "ğŸ›¡ï¸ Security" },
    { message = ".*", group = "ğŸ’¼ Other" },
]
link_parsers = [
    { pattern = "#([0-9]+)", href = "https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/issues/$1", text = "#$1" },
    { pattern = "!([0-9]+)", href = "https://gitlab.com/Zillowe/Zillwen/Zusty/Zoi/-/merge_requests/$1", text = "!$1" },
]
filter_commits = false
sort_commits = "oldest"
recurse_submodules = false
